const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/components-CapNEJhm.js","assets/vendor-CTygwWxc.js","assets/utils-BbDP4c6b.js","assets/ai-8rzRUgYl.js","assets/google-maps-C1qYM-EM.js"])))=>i.map(i=>d[i]);
import{r as s,j as e,q as ae,s as ie,R as y,t as ne}from"./vendor-CTygwWxc.js";import{F as ce,a as le,T as me,_ as v}from"./components-CapNEJhm.js";import{d as g}from"./utils-BbDP4c6b.js";import"./google-maps-C1qYM-EM.js";import"./ai-8rzRUgYl.js";(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();const pe=[{placeId:"ch-1",name:"麺屋 龍の心 (Menya Ryunoshin)",photos:[{small:"https://picsum.photos/seed/ramen1-main/400/300",medium:"https://picsum.photos/seed/ramen1-main/800/600",large:"https://picsum.photos/seed/ramen1-main/1200/900",alt:"龍の心ラーメン"},{small:"https://picsum.photos/seed/ramen1-side/400/300",medium:"https://picsum.photos/seed/ramen1-side/800/600",large:"https://picsum.photos/seed/ramen1-side/1200/900",alt:"サイドメニューの餃子"},{small:"https://picsum.photos/seed/ramen1-shop/400/300",medium:"https://picsum.photos/seed/ramen1-shop/800/600",large:"https://picsum.photos/seed/ramen1-shop/1200/900",alt:"店舗の外観"},{small:"https://picsum.photos/seed/ramen1-noodles/400/300",medium:"https://picsum.photos/seed/ramen1-noodles/800/600",large:"https://picsum.photos/seed/ramen1-noodles/1200/900",alt:"ラーメンの麺"}],rating:4.5,address:"東京都新宿区西新宿1-1-1",lat:35.690921,lng:139.700257,hours:"11:00 - 22:00",website:"https://example.com/ryunoshin",twitterUrl:"https://twitter.com/example_ramen",reviews:[{author:"佐藤健",text:"濃厚な豚骨スープが絶品！チャーシューがとろけるように柔らかく、替え玉必須です。行列が絶えないのも納得。",rating:5,relative_time_description:"1週間前",time:1705276800},{author:"鈴木一郎",text:"こってり好きにはたまらない一杯。麺の硬さも選べて最高でした。ニンニクをたっぷり入れるのがおすすめ。",rating:4,relative_time_description:"2週間前",time:1704672e3},{author:"高橋花子",text:"スープは美味しかったですが、少し味が濃すぎると感じました。店内の活気は良かったです。",rating:3,relative_time_description:"3週間前",time:1704067200},{author:"田中守",text:"週末のランチタイムはかなり混雑します。時間をずらしていくのが吉。",rating:4,relative_time_description:"1ヶ月前",time:1702684800},{author:"伊藤由美",text:"卓上の高菜が無料で食べ放題なのが嬉しい。ラーメンとの相性も抜群。",rating:5,relative_time_description:"1ヶ月前",time:170208e4},{author:"渡辺明",text:"店員さんの接客がとても丁寧で気持ちが良い。味だけでなく、サービスも素晴らしい。",rating:5,relative_time_description:"2ヶ月前",time:1699401600},{author:"山本さくら",text:"麺の量は標準的。たくさん食べる人は大盛りか替え玉を検討すると良いかも。",rating:4,relative_time_description:"2ヶ月前",time:1698796800},{author:"中村健太",text:"黒マー油が入った「黒龍ラーメン」も香ばしくておすすめ。",rating:5,relative_time_description:"3ヶ月前",time:1696118400},{author:"小林直子",text:"お店はカウンター席のみなので、大人数での訪問には向きません。一人か二人で行くのがベスト。",rating:3,relative_time_description:"3ヶ月前",time:1695513600},{author:"加藤浩二",text:"何度来ても飽きない味。これぞ王道の豚骨ラーメン。",rating:5,relative_time_description:"4ヶ月前",time:1692835200}],distance:250,keywords:["豚骨","こってり","行列"],isOpenNow:!0,congestion:"混雑",accessInfo:"JR新宿駅西口から徒歩5分",menu:[{name:"特製龍の心ラーメン",price:"1,100円"},{name:"味玉ラーメン",price:"950円"},{name:"チャーシュー丼",price:"350円"},{name:"餃子 (5個)",price:"450円"},{name:"ライス",price:"150円"},{name:"瓶ビール",price:"600円"}],parkingInfo:"近隣にコインパーキング多数有り（提携なし）"},{placeId:"ch-2",name:"鶏そば 白鷺 (Torisoba Shirasagi)",photos:[{small:"https://picsum.photos/seed/ramen2-main/400/300",medium:"https://picsum.photos/seed/ramen2-main/800/600",large:"https://picsum.photos/seed/ramen2-main/1200/900",alt:"鶏そば"},{small:"https://picsum.photos/seed/ramen2-side/400/300",medium:"https://picsum.photos/seed/ramen2-side/800/600",large:"https://picsum.photos/seed/ramen2-side/1200/900",alt:"鶏ハム"},{small:"https://picsum.photos/seed/ramen2-shop/400/300",medium:"https://picsum.photos/seed/ramen2-shop/800/600",large:"https://picsum.photos/seed/ramen2-shop/1200/900",alt:"白鷺の店舗内観"}],rating:4.8,address:"東京都渋谷区道玄坂2-2-2",lat:35.658034,lng:139.699998,hours:"11:30 - 15:00, 17:30 - 21:00",website:"https://example.com/shirasagi",twitterUrl:"https://twitter.com/example_ramen2",reviews:[{author:"田中美咲",text:"鶏の旨味が凝縮されたスープは、あっさりしているのに奥深い。細麺との相性も抜群。女性一人でも入りやすい雰囲気です。",rating:5,relative_time_description:"3日前",time:1705536e3},{author:"伊藤大輔",text:"非常に上品な味わいのラーメン。チャーシューの代わりに鶏ハムが乗っていてヘルシー。スープを最後まで飲み干してしまった。",rating:5,relative_time_description:"1週間前",time:1705104e3},{author:"渡辺あきら",text:"限定の柚子塩そばが最高でした。",rating:5,relative_time_description:"2週間前",time:1704499200},{author:"中村さやか",text:"店内がとても綺麗で快適でした。",rating:4,relative_time_description:"3週間前",time:1703894400},{author:"小林太郎",text:"麺の量が少し少なめに感じました。",rating:3,relative_time_description:"1ヶ月前",time:1702512e3},{author:"斉藤一",text:"リピート確定です。次はつけ麺を試したい。",rating:5,relative_time_description:"2ヶ月前",time:1699228800}],distance:480,keywords:["鶏白湯","あっさり","上品"],isOpenNow:!1,congestion:"不明",accessInfo:"JR渋谷駅ハチ公口から徒歩7分",menu:[{name:"特製鶏そば（塩）",price:"1,200円"},{name:"鶏そば（醤油）",price:"900円"},{name:"鶏白湯つけ麺",price:"1,000円"}],parkingInfo:"駐車場なし。渋谷駅周辺の駐車場をご利用ください。"},{placeId:"ch-3",name:"味噌の極み (Miso no Kiwami)",photos:[{small:"https://picsum.photos/seed/ramen3-main/400/300",medium:"https://picsum.photos/seed/ramen3-main/800/600",large:"https://picsum.photos/seed/ramen3-main/1200/900",alt:"味噌ラーメン"},{small:"https://picsum.photos/seed/ramen3-side/400/300",medium:"https://picsum.photos/seed/ramen3-side/800/600",large:"https://picsum.photos/seed/ramen3-side/1200/900",alt:"バターコーンのトッピング"},{small:"https://picsum.photos/seed/ramen3-shop/400/300",medium:"https://picsum.photos/seed/ramen3-shop/800/600",large:"https://picsum.photos/seed/ramen3-shop/1200/900",alt:"味噌の極みの店舗"},{small:"https://picsum.photos/seed/ramen3-gyoza/400/300",medium:"https://picsum.photos/seed/ramen3-gyoza/800/600",large:"https://picsum.photos/seed/ramen3-gyoza/1200/900",alt:"サイドの餃子"}],rating:4.2,address:"東京都豊島区東池袋3-3-3",lat:35.729458,lng:139.710348,hours:"11:00 - 23:00",website:"https://example.com/kiwami",reviews:[{author:"渡辺直樹",text:"北海道出身者も唸る本格味噌ラーメン。炒めた野菜の香ばしさがスープに溶け込んでいて最高。太ちぢれ麺がスープによく絡む。",rating:5,relative_time_description:"5日前",time:1705363200},{author:"山本由美",text:"バターとコーンをトッピングするのが定番。味が濃いめなので、ライスと一緒に食べるのがおすすめです。体が温まります。",rating:4,relative_time_description:"1週間前",time:1704931200}],distance:800,keywords:["味噌","濃厚","北海道"],isOpenNow:!0,congestion:"普通",accessInfo:"JR池袋駅東口から徒歩10分",menu:[{name:"極み味噌ラーメン",price:"980円"},{name:"辛味噌ラーメン",price:"1,050円"},{name:"餃子セット",price:"400円"}],parkingInfo:"店舗裏に提携コインパーキング有り（200円割引）"},{placeId:"ch-4",name:"煮干し中華そば 凪 (Niboshi Chuukasoba Nagi)",photos:[{small:"https://picsum.photos/seed/ramen4-main/400/300",medium:"https://picsum.photos/seed/ramen4-main/800/600",large:"https://picsum.photos/seed/ramen4-main/1200/900",alt:"すごい煮干ラーメン"},{small:"https://picsum.photos/seed/ramen4-shop/400/300",medium:"https://picsum.photos/seed/ramen4-shop/800/600",large:"https://picsum.photos/seed/ramen4-shop/1200/900",alt:"凪の店舗"}],rating:4.3,address:"東京都千代田区丸の内4-4-4",lat:35.681236,lng:139.767125,hours:"10:30 - 22:00",website:"https://example.com/nagi",reviews:[{author:"中村拓也",text:"煮干しのパンチがすごい！好きな人はとことんハマる味。最初は驚くけど、だんだんクセになってくる。",rating:4,relative_time_description:"2日前",time:1705622400},{author:"小林さやか",text:"煮干しの風味がガツンときます。麺は太めで食べ応えあり。好みが分かれる味かもしれませんが、私は大好きです。",rating:5,relative_time_description:"4日前",time:1705449600}],distance:150,keywords:["煮干","醤油","個性的"],isOpenNow:!0,congestion:"空席あり",accessInfo:"東京メトロ大手町駅直結",menu:[{name:"すごい煮干ラーメン",price:"900円"},{name:"塩煮干ラーメン",price:"900円"},{name:"いったん麺",price:"150円"}],parkingInfo:"ビル地下駐車場利用可能（有料）"}],de=y.lazy(()=>v(()=>import("./components-CapNEJhm.js").then(n=>n.R),__vite__mapDeps([0,1,2,3,4]))),ue=y.lazy(()=>v(()=>import("./components-CapNEJhm.js").then(n=>n.M),__vite__mapDeps([0,1,2,3,4]))),K=y.lazy(()=>v(()=>import("./components-CapNEJhm.js").then(n=>n.S),__vite__mapDeps([0,1,2,3,4])));function he(){const[n,m]=s.useState("search"),[a,c]=s.useState(null),[o,r]=s.useState(""),[d,j]=s.useState("distance"),[N,M]=s.useState(""),[C,I]=s.useState(!1),[O,P]=s.useState([]),[L,T]=s.useState(!1),[F,R]=s.useState(!1),[E,B]=s.useState(null),[V,A]=s.useState(null),D=s.useRef(null),[f,$]=s.useState(new Set),[x,J]=s.useState(new Set),[S,q]=s.useState(new Set),[b,G]=s.useState([]),[Q,z]=s.useState(!1),[U,H]=s.useState({message:"",show:!1}),_=async(t,i,u)=>{const k=new Set(t);i(l=>{const h=new Set(l);return h.has(u)?h.delete(u):h.add(u),h});try{await new Promise((l,h)=>{setTimeout(()=>{Math.random()>.8?h(new Error("Simulated network error")):l()},500)}),console.log("Update successful for",u)}catch(l){console.error("Optimistic update failed, rolling back:",l),i(k),alert("更新に失敗しました。少し時間をおいて再度お試しください。")}},X=s.useCallback(t=>{_(f,$,t)},[f]),Y=s.useCallback((t,i)=>{i==="visited"?_(x,J,t):_(S,q,t)},[x,S]),Z=s.useCallback(t=>{G(i=>[t,...i])},[]),p=t=>{H({message:t,show:!0}),setTimeout(()=>{H({message:"",show:!1})},3e3)};s.useEffect(()=>{window.testDataMigration=async()=>{console.log("🔍 Starting data migration test...");try{console.log("📋 Checking if migration is needed...");const t=await g.isMigrationNeeded();console.log(`Migration needed: ${t}`),console.log("⚖️ Comparing local vs Supabase data...");const i=await g.compareData();if(console.log("Data comparison:",i),t){console.log("🚀 Starting migration process...");const k=await g.createBackup();console.log("Backup created:",k);const l=await g.migrateToSupabase();console.log("Migration result:",l),l.success?(console.log("✅ Migration completed successfully!"),p("データ移行が完了しました！")):(console.log("❌ Migration failed:",l.errors),p("データ移行に失敗しました"))}else console.log("ℹ️ No migration needed"),p("移行するデータがありません");console.log("🔍 Final data comparison...");const u=await g.compareData();console.log("Final comparison:",u)}catch(t){console.error("Migration test failed:",t),p("テストに失敗しました")}},window.checkSupabaseConnection=async()=>{try{const t=await g.compareData();console.log("Supabase connection test:",t),p("接続テストが完了しました")}catch(t){console.error("Connection test failed:",t),p("接続テストに失敗しました")}},console.log("🎯 Migration test ready! Call testDataMigration() or checkSupabaseConnection() in console.")},[]);const ee=t=>{console.log("--- Feedback Submitted ---"),console.log("Type:",t.type),console.log("Details:",t.details),console.log("Screenshot (Base64):",t.screenshot?`${t.screenshot.substring(0,50)}...`:"Not provided"),console.log("--------------------------"),p("ご意見ありがとうございます！")},w=s.useMemo(()=>{const t=new Map;return pe.forEach(i=>t.set(i.placeId,i)),t},[]),te=s.useMemo(()=>Array.from(f).map(t=>w.get(t)).filter(Boolean),[f,w]),se=s.useMemo(()=>Array.from(x).map(t=>w.get(t)).filter(Boolean),[x,w]),oe=s.useMemo(()=>a?b.filter(t=>t.placeId===a.placeId):[],[b,a?.placeId]),re=()=>{if(a)return e.jsx(s.Suspense,{fallback:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500"})}),children:e.jsx(de,{shop:a,onBack:()=>c(null),isBookmarked:f.has(a.placeId),isVisited:x.has(a.placeId),isFavorite:S.has(a.placeId),onBookmarkToggle:()=>X(a.placeId),onStatusToggle:t=>Y(a.placeId,t),onAddPost:Z,userPosts:oe})});switch(n){case"search":return e.jsx(s.Suspense,{fallback:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500"})}),children:e.jsx(K,{onShopSelect:c,searchTerm:o,setSearchTerm:r,sortKey:d,setSortKey:j,soupTypeFilter:N,setSoupTypeFilter:M,filterOpenNow:C,setFilterOpenNow:I,shops:O,setShops:P,isLocating:L,setIsLocating:T,isFiltering:F,setIsFiltering:R,userLocation:D,hoveredPlaceId:E,setHoveredPlaceId:B,highlightedPlaceId:V,setHighlightedPlaceId:A})});case"mypage":return e.jsx(s.Suspense,{fallback:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500"})}),children:e.jsx(ue,{bookmarkedShops:te,visitedShops:se,userPosts:b,onShopSelect:c})});default:return e.jsx(s.Suspense,{fallback:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500"})}),children:e.jsx(K,{onShopSelect:c,searchTerm:o,setSearchTerm:r,sortKey:d,setSortKey:j,soupTypeFilter:N,setSoupTypeFilter:M,filterOpenNow:C,setFilterOpenNow:I,shops:O,setShops:P,isLocating:L,setIsLocating:T,isFiltering:F,setIsFiltering:R,userLocation:D,hoveredPlaceId:E,setHoveredPlaceId:B,highlightedPlaceId:V,setHighlightedPlaceId:A})})}};return e.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-950 text-gray-200",children:[e.jsx("header",{className:"bg-gray-900 border-b border-gray-800 text-white shadow-md sticky top-0 z-30",children:e.jsx("div",{className:"container mx-auto max-w-7xl px-4 py-3 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{m("search"),c(null)},children:[e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-red-500",children:[e.jsx("path",{d:"M4 21V19C4 17.8954 4.89543 17 6 17H10C11.1046 17 12 17.8954 12 19V21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 21V19C12 17.8954 12.8954 17 14 17H18C19.1046 17 20 17.8954 20 19V21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M7 17V11C7 8.23858 9.23858 6 12 6C14.7614 6 17 8.23858 17 11V17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 6V3M12 3L10 4M12 3L14 4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("h1",{className:"text-2xl font-bold tracking-wider",children:"Ramen Compass"})]})})}),e.jsx("main",{className:"flex-grow w-full max-w-7xl mx-auto",children:re()}),!a&&e.jsx("footer",{className:"sticky bottom-0 bg-gray-900/80 backdrop-blur-sm border-t border-gray-800 shadow-t-lg z-20",children:e.jsxs("div",{className:"container mx-auto max-w-7xl flex justify-around",children:[e.jsxs("button",{onClick:()=>{m("search"),c(null)},className:`flex flex-col items-center justify-center w-full py-2 text-sm font-medium transition-colors ${n==="search"?"text-red-500":"text-gray-400 hover:text-red-500"}`,children:[e.jsx(ae,{className:"h-6 w-6 mb-0.5"}),"検索"]}),e.jsxs("button",{onClick:()=>{m("mypage"),c(null)},className:`flex flex-col items-center justify-center w-full py-2 text-sm font-medium transition-colors ${n==="mypage"?"text-red-500":"text-gray-400 hover:text-red-500"}`,children:[e.jsx(ie,{className:"h-6 w-6 mb-0.5"}),"マイページ"]})]})}),e.jsx(ce,{onOpen:()=>z(!0)}),e.jsx(le,{isOpen:Q,onClose:()=>z(!1),onSubmit:ee}),e.jsx(me,{message:U.message,show:U.show})]})}const W=document.getElementById("root");if(!W)throw new Error("Could not find root element to mount to");const ge=ne.createRoot(W);ge.render(e.jsx(y.StrictMode,{children:e.jsx(he,{})}));
