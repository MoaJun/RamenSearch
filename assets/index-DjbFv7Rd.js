const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/components-CapNEJhm.js","assets/vendor-CTygwWxc.js","assets/utils-BbDP4c6b.js","assets/ai-8rzRUgYl.js","assets/google-maps-C1qYM-EM.js"])))=>i.map(i=>d[i]);
import{r as s,j as e,q as ae,s as ie,R as y,t as ne}from"./vendor-CTygwWxc.js";import{F as ce,a as le,T as me,_ as v}from"./components-CapNEJhm.js";import{d as g}from"./utils-BbDP4c6b.js";import"./google-maps-C1qYM-EM.js";import"./ai-8rzRUgYl.js";(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();const pe=[{placeId:"ch-1",name:"éººå±‹ é¾ã®å¿ƒ (Menya Ryunoshin)",photos:[{small:"https://picsum.photos/seed/ramen1-main/400/300",medium:"https://picsum.photos/seed/ramen1-main/800/600",large:"https://picsum.photos/seed/ramen1-main/1200/900",alt:"é¾ã®å¿ƒãƒ©ãƒ¼ãƒ¡ãƒ³"},{small:"https://picsum.photos/seed/ramen1-side/400/300",medium:"https://picsum.photos/seed/ramen1-side/800/600",large:"https://picsum.photos/seed/ramen1-side/1200/900",alt:"ã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®é¤ƒå­"},{small:"https://picsum.photos/seed/ramen1-shop/400/300",medium:"https://picsum.photos/seed/ramen1-shop/800/600",large:"https://picsum.photos/seed/ramen1-shop/1200/900",alt:"åº—èˆ—ã®å¤–è¦³"},{small:"https://picsum.photos/seed/ramen1-noodles/400/300",medium:"https://picsum.photos/seed/ramen1-noodles/800/600",large:"https://picsum.photos/seed/ramen1-noodles/1200/900",alt:"ãƒ©ãƒ¼ãƒ¡ãƒ³ã®éºº"}],rating:4.5,address:"æ±äº¬éƒ½æ–°å®¿åŒºè¥¿æ–°å®¿1-1-1",lat:35.690921,lng:139.700257,hours:"11:00 - 22:00",website:"https://example.com/ryunoshin",twitterUrl:"https://twitter.com/example_ramen",reviews:[{author:"ä½è—¤å¥",text:"æ¿ƒåŽšãªè±šéª¨ã‚¹ãƒ¼ãƒ—ãŒçµ¶å“ï¼ãƒãƒ£ãƒ¼ã‚·ãƒ¥ãƒ¼ãŒã¨ã‚ã‘ã‚‹ã‚ˆã†ã«æŸ”ã‚‰ã‹ãã€æ›¿ãˆçŽ‰å¿…é ˆã§ã™ã€‚è¡Œåˆ—ãŒçµ¶ãˆãªã„ã®ã‚‚ç´å¾—ã€‚",rating:5,relative_time_description:"1é€±é–“å‰",time:1705276800},{author:"éˆ´æœ¨ä¸€éƒŽ",text:"ã“ã£ã¦ã‚Šå¥½ãã«ã¯ãŸã¾ã‚‰ãªã„ä¸€æ¯ã€‚éººã®ç¡¬ã•ã‚‚é¸ã¹ã¦æœ€é«˜ã§ã—ãŸã€‚ãƒ‹ãƒ³ãƒ‹ã‚¯ã‚’ãŸã£ã·ã‚Šå…¥ã‚Œã‚‹ã®ãŒãŠã™ã™ã‚ã€‚",rating:4,relative_time_description:"2é€±é–“å‰",time:1704672e3},{author:"é«˜æ©‹èŠ±å­",text:"ã‚¹ãƒ¼ãƒ—ã¯ç¾Žå‘³ã—ã‹ã£ãŸã§ã™ãŒã€å°‘ã—å‘³ãŒæ¿ƒã™ãŽã‚‹ã¨æ„Ÿã˜ã¾ã—ãŸã€‚åº—å†…ã®æ´»æ°—ã¯è‰¯ã‹ã£ãŸã§ã™ã€‚",rating:3,relative_time_description:"3é€±é–“å‰",time:1704067200},{author:"ç”°ä¸­å®ˆ",text:"é€±æœ«ã®ãƒ©ãƒ³ãƒã‚¿ã‚¤ãƒ ã¯ã‹ãªã‚Šæ··é›‘ã—ã¾ã™ã€‚æ™‚é–“ã‚’ãšã‚‰ã—ã¦ã„ãã®ãŒå‰ã€‚",rating:4,relative_time_description:"1ãƒ¶æœˆå‰",time:1702684800},{author:"ä¼Šè—¤ç”±ç¾Ž",text:"å“ä¸Šã®é«˜èœãŒç„¡æ–™ã§é£Ÿã¹æ”¾é¡Œãªã®ãŒå¬‰ã—ã„ã€‚ãƒ©ãƒ¼ãƒ¡ãƒ³ã¨ã®ç›¸æ€§ã‚‚æŠœç¾¤ã€‚",rating:5,relative_time_description:"1ãƒ¶æœˆå‰",time:170208e4},{author:"æ¸¡è¾ºæ˜Ž",text:"åº—å“¡ã•ã‚“ã®æŽ¥å®¢ãŒã¨ã¦ã‚‚ä¸å¯§ã§æ°—æŒã¡ãŒè‰¯ã„ã€‚å‘³ã ã‘ã§ãªãã€ã‚µãƒ¼ãƒ“ã‚¹ã‚‚ç´ æ™´ã‚‰ã—ã„ã€‚",rating:5,relative_time_description:"2ãƒ¶æœˆå‰",time:1699401600},{author:"å±±æœ¬ã•ãã‚‰",text:"éººã®é‡ã¯æ¨™æº–çš„ã€‚ãŸãã•ã‚“é£Ÿã¹ã‚‹äººã¯å¤§ç››ã‚Šã‹æ›¿ãˆçŽ‰ã‚’æ¤œè¨Žã™ã‚‹ã¨è‰¯ã„ã‹ã‚‚ã€‚",rating:4,relative_time_description:"2ãƒ¶æœˆå‰",time:1698796800},{author:"ä¸­æ‘å¥å¤ª",text:"é»’ãƒžãƒ¼æ²¹ãŒå…¥ã£ãŸã€Œé»’é¾ãƒ©ãƒ¼ãƒ¡ãƒ³ã€ã‚‚é¦™ã°ã—ãã¦ãŠã™ã™ã‚ã€‚",rating:5,relative_time_description:"3ãƒ¶æœˆå‰",time:1696118400},{author:"å°æž—ç›´å­",text:"ãŠåº—ã¯ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼å¸­ã®ã¿ãªã®ã§ã€å¤§äººæ•°ã§ã®è¨ªå•ã«ã¯å‘ãã¾ã›ã‚“ã€‚ä¸€äººã‹äºŒäººã§è¡Œãã®ãŒãƒ™ã‚¹ãƒˆã€‚",rating:3,relative_time_description:"3ãƒ¶æœˆå‰",time:1695513600},{author:"åŠ è—¤æµ©äºŒ",text:"ä½•åº¦æ¥ã¦ã‚‚é£½ããªã„å‘³ã€‚ã“ã‚ŒãžçŽ‹é“ã®è±šéª¨ãƒ©ãƒ¼ãƒ¡ãƒ³ã€‚",rating:5,relative_time_description:"4ãƒ¶æœˆå‰",time:1692835200}],distance:250,keywords:["è±šéª¨","ã“ã£ã¦ã‚Š","è¡Œåˆ—"],isOpenNow:!0,congestion:"æ··é›‘",accessInfo:"JRæ–°å®¿é§…è¥¿å£ã‹ã‚‰å¾’æ­©5åˆ†",menu:[{name:"ç‰¹è£½é¾ã®å¿ƒãƒ©ãƒ¼ãƒ¡ãƒ³",price:"1,100å††"},{name:"å‘³çŽ‰ãƒ©ãƒ¼ãƒ¡ãƒ³",price:"950å††"},{name:"ãƒãƒ£ãƒ¼ã‚·ãƒ¥ãƒ¼ä¸¼",price:"350å††"},{name:"é¤ƒå­ (5å€‹)",price:"450å††"},{name:"ãƒ©ã‚¤ã‚¹",price:"150å††"},{name:"ç“¶ãƒ“ãƒ¼ãƒ«",price:"600å††"}],parkingInfo:"è¿‘éš£ã«ã‚³ã‚¤ãƒ³ãƒ‘ãƒ¼ã‚­ãƒ³ã‚°å¤šæ•°æœ‰ã‚Šï¼ˆææºãªã—ï¼‰"},{placeId:"ch-2",name:"é¶ãã° ç™½é·º (Torisoba Shirasagi)",photos:[{small:"https://picsum.photos/seed/ramen2-main/400/300",medium:"https://picsum.photos/seed/ramen2-main/800/600",large:"https://picsum.photos/seed/ramen2-main/1200/900",alt:"é¶ãã°"},{small:"https://picsum.photos/seed/ramen2-side/400/300",medium:"https://picsum.photos/seed/ramen2-side/800/600",large:"https://picsum.photos/seed/ramen2-side/1200/900",alt:"é¶ãƒãƒ "},{small:"https://picsum.photos/seed/ramen2-shop/400/300",medium:"https://picsum.photos/seed/ramen2-shop/800/600",large:"https://picsum.photos/seed/ramen2-shop/1200/900",alt:"ç™½é·ºã®åº—èˆ—å†…è¦³"}],rating:4.8,address:"æ±äº¬éƒ½æ¸‹è°·åŒºé“çŽ„å‚2-2-2",lat:35.658034,lng:139.699998,hours:"11:30 - 15:00, 17:30 - 21:00",website:"https://example.com/shirasagi",twitterUrl:"https://twitter.com/example_ramen2",reviews:[{author:"ç”°ä¸­ç¾Žå’²",text:"é¶ã®æ—¨å‘³ãŒå‡ç¸®ã•ã‚ŒãŸã‚¹ãƒ¼ãƒ—ã¯ã€ã‚ã£ã•ã‚Šã—ã¦ã„ã‚‹ã®ã«å¥¥æ·±ã„ã€‚ç´°éººã¨ã®ç›¸æ€§ã‚‚æŠœç¾¤ã€‚å¥³æ€§ä¸€äººã§ã‚‚å…¥ã‚Šã‚„ã™ã„é›°å›²æ°—ã§ã™ã€‚",rating:5,relative_time_description:"3æ—¥å‰",time:1705536e3},{author:"ä¼Šè—¤å¤§è¼”",text:"éžå¸¸ã«ä¸Šå“ãªå‘³ã‚ã„ã®ãƒ©ãƒ¼ãƒ¡ãƒ³ã€‚ãƒãƒ£ãƒ¼ã‚·ãƒ¥ãƒ¼ã®ä»£ã‚ã‚Šã«é¶ãƒãƒ ãŒä¹—ã£ã¦ã„ã¦ãƒ˜ãƒ«ã‚·ãƒ¼ã€‚ã‚¹ãƒ¼ãƒ—ã‚’æœ€å¾Œã¾ã§é£²ã¿å¹²ã—ã¦ã—ã¾ã£ãŸã€‚",rating:5,relative_time_description:"1é€±é–“å‰",time:1705104e3},{author:"æ¸¡è¾ºã‚ãã‚‰",text:"é™å®šã®æŸšå­å¡©ãã°ãŒæœ€é«˜ã§ã—ãŸã€‚",rating:5,relative_time_description:"2é€±é–“å‰",time:1704499200},{author:"ä¸­æ‘ã•ã‚„ã‹",text:"åº—å†…ãŒã¨ã¦ã‚‚ç¶ºéº—ã§å¿«é©ã§ã—ãŸã€‚",rating:4,relative_time_description:"3é€±é–“å‰",time:1703894400},{author:"å°æž—å¤ªéƒŽ",text:"éººã®é‡ãŒå°‘ã—å°‘ãªã‚ã«æ„Ÿã˜ã¾ã—ãŸã€‚",rating:3,relative_time_description:"1ãƒ¶æœˆå‰",time:1702512e3},{author:"æ–‰è—¤ä¸€",text:"ãƒªãƒ”ãƒ¼ãƒˆç¢ºå®šã§ã™ã€‚æ¬¡ã¯ã¤ã‘éººã‚’è©¦ã—ãŸã„ã€‚",rating:5,relative_time_description:"2ãƒ¶æœˆå‰",time:1699228800}],distance:480,keywords:["é¶ç™½æ¹¯","ã‚ã£ã•ã‚Š","ä¸Šå“"],isOpenNow:!1,congestion:"ä¸æ˜Ž",accessInfo:"JRæ¸‹è°·é§…ãƒãƒå…¬å£ã‹ã‚‰å¾’æ­©7åˆ†",menu:[{name:"ç‰¹è£½é¶ãã°ï¼ˆå¡©ï¼‰",price:"1,200å††"},{name:"é¶ãã°ï¼ˆé†¤æ²¹ï¼‰",price:"900å††"},{name:"é¶ç™½æ¹¯ã¤ã‘éºº",price:"1,000å††"}],parkingInfo:"é§è»Šå ´ãªã—ã€‚æ¸‹è°·é§…å‘¨è¾ºã®é§è»Šå ´ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚"},{placeId:"ch-3",name:"å‘³å™Œã®æ¥µã¿ (Miso no Kiwami)",photos:[{small:"https://picsum.photos/seed/ramen3-main/400/300",medium:"https://picsum.photos/seed/ramen3-main/800/600",large:"https://picsum.photos/seed/ramen3-main/1200/900",alt:"å‘³å™Œãƒ©ãƒ¼ãƒ¡ãƒ³"},{small:"https://picsum.photos/seed/ramen3-side/400/300",medium:"https://picsum.photos/seed/ramen3-side/800/600",large:"https://picsum.photos/seed/ramen3-side/1200/900",alt:"ãƒã‚¿ãƒ¼ã‚³ãƒ¼ãƒ³ã®ãƒˆãƒƒãƒ”ãƒ³ã‚°"},{small:"https://picsum.photos/seed/ramen3-shop/400/300",medium:"https://picsum.photos/seed/ramen3-shop/800/600",large:"https://picsum.photos/seed/ramen3-shop/1200/900",alt:"å‘³å™Œã®æ¥µã¿ã®åº—èˆ—"},{small:"https://picsum.photos/seed/ramen3-gyoza/400/300",medium:"https://picsum.photos/seed/ramen3-gyoza/800/600",large:"https://picsum.photos/seed/ramen3-gyoza/1200/900",alt:"ã‚µã‚¤ãƒ‰ã®é¤ƒå­"}],rating:4.2,address:"æ±äº¬éƒ½è±Šå³¶åŒºæ±æ± è¢‹3-3-3",lat:35.729458,lng:139.710348,hours:"11:00 - 23:00",website:"https://example.com/kiwami",reviews:[{author:"æ¸¡è¾ºç›´æ¨¹",text:"åŒ—æµ·é“å‡ºèº«è€…ã‚‚å”¸ã‚‹æœ¬æ ¼å‘³å™Œãƒ©ãƒ¼ãƒ¡ãƒ³ã€‚ç‚’ã‚ãŸé‡Žèœã®é¦™ã°ã—ã•ãŒã‚¹ãƒ¼ãƒ—ã«æº¶ã‘è¾¼ã‚“ã§ã„ã¦æœ€é«˜ã€‚å¤ªã¡ã¢ã‚ŒéººãŒã‚¹ãƒ¼ãƒ—ã«ã‚ˆãçµ¡ã‚€ã€‚",rating:5,relative_time_description:"5æ—¥å‰",time:1705363200},{author:"å±±æœ¬ç”±ç¾Ž",text:"ãƒã‚¿ãƒ¼ã¨ã‚³ãƒ¼ãƒ³ã‚’ãƒˆãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹ã®ãŒå®šç•ªã€‚å‘³ãŒæ¿ƒã„ã‚ãªã®ã§ã€ãƒ©ã‚¤ã‚¹ã¨ä¸€ç·’ã«é£Ÿã¹ã‚‹ã®ãŒãŠã™ã™ã‚ã§ã™ã€‚ä½“ãŒæ¸©ã¾ã‚Šã¾ã™ã€‚",rating:4,relative_time_description:"1é€±é–“å‰",time:1704931200}],distance:800,keywords:["å‘³å™Œ","æ¿ƒåŽš","åŒ—æµ·é“"],isOpenNow:!0,congestion:"æ™®é€š",accessInfo:"JRæ± è¢‹é§…æ±å£ã‹ã‚‰å¾’æ­©10åˆ†",menu:[{name:"æ¥µã¿å‘³å™Œãƒ©ãƒ¼ãƒ¡ãƒ³",price:"980å††"},{name:"è¾›å‘³å™Œãƒ©ãƒ¼ãƒ¡ãƒ³",price:"1,050å††"},{name:"é¤ƒå­ã‚»ãƒƒãƒˆ",price:"400å††"}],parkingInfo:"åº—èˆ—è£ã«ææºã‚³ã‚¤ãƒ³ãƒ‘ãƒ¼ã‚­ãƒ³ã‚°æœ‰ã‚Šï¼ˆ200å††å‰²å¼•ï¼‰"},{placeId:"ch-4",name:"ç…®å¹²ã—ä¸­è¯ãã° å‡ª (Niboshi Chuukasoba Nagi)",photos:[{small:"https://picsum.photos/seed/ramen4-main/400/300",medium:"https://picsum.photos/seed/ramen4-main/800/600",large:"https://picsum.photos/seed/ramen4-main/1200/900",alt:"ã™ã”ã„ç…®å¹²ãƒ©ãƒ¼ãƒ¡ãƒ³"},{small:"https://picsum.photos/seed/ramen4-shop/400/300",medium:"https://picsum.photos/seed/ramen4-shop/800/600",large:"https://picsum.photos/seed/ramen4-shop/1200/900",alt:"å‡ªã®åº—èˆ—"}],rating:4.3,address:"æ±äº¬éƒ½åƒä»£ç”°åŒºä¸¸ã®å†…4-4-4",lat:35.681236,lng:139.767125,hours:"10:30 - 22:00",website:"https://example.com/nagi",reviews:[{author:"ä¸­æ‘æ‹“ä¹Ÿ",text:"ç…®å¹²ã—ã®ãƒ‘ãƒ³ãƒãŒã™ã”ã„ï¼å¥½ããªäººã¯ã¨ã“ã¨ã‚“ãƒãƒžã‚‹å‘³ã€‚æœ€åˆã¯é©šãã‘ã©ã€ã ã‚“ã ã‚“ã‚¯ã‚»ã«ãªã£ã¦ãã‚‹ã€‚",rating:4,relative_time_description:"2æ—¥å‰",time:1705622400},{author:"å°æž—ã•ã‚„ã‹",text:"ç…®å¹²ã—ã®é¢¨å‘³ãŒã‚¬ãƒ„ãƒ³ã¨ãã¾ã™ã€‚éººã¯å¤ªã‚ã§é£Ÿã¹å¿œãˆã‚ã‚Šã€‚å¥½ã¿ãŒåˆ†ã‹ã‚Œã‚‹å‘³ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ç§ã¯å¤§å¥½ãã§ã™ã€‚",rating:5,relative_time_description:"4æ—¥å‰",time:1705449600}],distance:150,keywords:["ç…®å¹²","é†¤æ²¹","å€‹æ€§çš„"],isOpenNow:!0,congestion:"ç©ºå¸­ã‚ã‚Š",accessInfo:"æ±äº¬ãƒ¡ãƒˆãƒ­å¤§æ‰‹ç”ºé§…ç›´çµ",menu:[{name:"ã™ã”ã„ç…®å¹²ãƒ©ãƒ¼ãƒ¡ãƒ³",price:"900å††"},{name:"å¡©ç…®å¹²ãƒ©ãƒ¼ãƒ¡ãƒ³",price:"900å††"},{name:"ã„ã£ãŸã‚“éºº",price:"150å††"}],parkingInfo:"ãƒ“ãƒ«åœ°ä¸‹é§è»Šå ´åˆ©ç”¨å¯èƒ½ï¼ˆæœ‰æ–™ï¼‰"}],de=y.lazy(()=>v(()=>import("./components-CapNEJhm.js").then(n=>n.R),__vite__mapDeps([0,1,2,3,4]))),ue=y.lazy(()=>v(()=>import("./components-CapNEJhm.js").then(n=>n.M),__vite__mapDeps([0,1,2,3,4]))),K=y.lazy(()=>v(()=>import("./components-CapNEJhm.js").then(n=>n.S),__vite__mapDeps([0,1,2,3,4])));function he(){const[n,m]=s.useState("search"),[a,c]=s.useState(null),[o,r]=s.useState(""),[d,j]=s.useState("distance"),[N,M]=s.useState(""),[C,I]=s.useState(!1),[O,P]=s.useState([]),[L,T]=s.useState(!1),[F,R]=s.useState(!1),[E,B]=s.useState(null),[V,A]=s.useState(null),D=s.useRef(null),[f,$]=s.useState(new Set),[x,J]=s.useState(new Set),[S,q]=s.useState(new Set),[b,G]=s.useState([]),[Q,z]=s.useState(!1),[U,H]=s.useState({message:"",show:!1}),_=async(t,i,u)=>{const k=new Set(t);i(l=>{const h=new Set(l);return h.has(u)?h.delete(u):h.add(u),h});try{await new Promise((l,h)=>{setTimeout(()=>{Math.random()>.8?h(new Error("Simulated network error")):l()},500)}),console.log("Update successful for",u)}catch(l){console.error("Optimistic update failed, rolling back:",l),i(k),alert("æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸã€‚å°‘ã—æ™‚é–“ã‚’ãŠã„ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚")}},X=s.useCallback(t=>{_(f,$,t)},[f]),Y=s.useCallback((t,i)=>{i==="visited"?_(x,J,t):_(S,q,t)},[x,S]),Z=s.useCallback(t=>{G(i=>[t,...i])},[]),p=t=>{H({message:t,show:!0}),setTimeout(()=>{H({message:"",show:!1})},3e3)};s.useEffect(()=>{window.testDataMigration=async()=>{console.log("ðŸ” Starting data migration test...");try{console.log("ðŸ“‹ Checking if migration is needed...");const t=await g.isMigrationNeeded();console.log(`Migration needed: ${t}`),console.log("âš–ï¸ Comparing local vs Supabase data...");const i=await g.compareData();if(console.log("Data comparison:",i),t){console.log("ðŸš€ Starting migration process...");const k=await g.createBackup();console.log("Backup created:",k);const l=await g.migrateToSupabase();console.log("Migration result:",l),l.success?(console.log("âœ… Migration completed successfully!"),p("ãƒ‡ãƒ¼ã‚¿ç§»è¡ŒãŒå®Œäº†ã—ã¾ã—ãŸï¼")):(console.log("âŒ Migration failed:",l.errors),p("ãƒ‡ãƒ¼ã‚¿ç§»è¡Œã«å¤±æ•—ã—ã¾ã—ãŸ"))}else console.log("â„¹ï¸ No migration needed"),p("ç§»è¡Œã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“");console.log("ðŸ” Final data comparison...");const u=await g.compareData();console.log("Final comparison:",u)}catch(t){console.error("Migration test failed:",t),p("ãƒ†ã‚¹ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ")}},window.checkSupabaseConnection=async()=>{try{const t=await g.compareData();console.log("Supabase connection test:",t),p("æŽ¥ç¶šãƒ†ã‚¹ãƒˆãŒå®Œäº†ã—ã¾ã—ãŸ")}catch(t){console.error("Connection test failed:",t),p("æŽ¥ç¶šãƒ†ã‚¹ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ")}},console.log("ðŸŽ¯ Migration test ready! Call testDataMigration() or checkSupabaseConnection() in console.")},[]);const ee=t=>{console.log("--- Feedback Submitted ---"),console.log("Type:",t.type),console.log("Details:",t.details),console.log("Screenshot (Base64):",t.screenshot?`${t.screenshot.substring(0,50)}...`:"Not provided"),console.log("--------------------------"),p("ã”æ„è¦‹ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼")},w=s.useMemo(()=>{const t=new Map;return pe.forEach(i=>t.set(i.placeId,i)),t},[]),te=s.useMemo(()=>Array.from(f).map(t=>w.get(t)).filter(Boolean),[f,w]),se=s.useMemo(()=>Array.from(x).map(t=>w.get(t)).filter(Boolean),[x,w]),oe=s.useMemo(()=>a?b.filter(t=>t.placeId===a.placeId):[],[b,a?.placeId]),re=()=>{if(a)return e.jsx(s.Suspense,{fallback:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500"})}),children:e.jsx(de,{shop:a,onBack:()=>c(null),isBookmarked:f.has(a.placeId),isVisited:x.has(a.placeId),isFavorite:S.has(a.placeId),onBookmarkToggle:()=>X(a.placeId),onStatusToggle:t=>Y(a.placeId,t),onAddPost:Z,userPosts:oe})});switch(n){case"search":return e.jsx(s.Suspense,{fallback:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500"})}),children:e.jsx(K,{onShopSelect:c,searchTerm:o,setSearchTerm:r,sortKey:d,setSortKey:j,soupTypeFilter:N,setSoupTypeFilter:M,filterOpenNow:C,setFilterOpenNow:I,shops:O,setShops:P,isLocating:L,setIsLocating:T,isFiltering:F,setIsFiltering:R,userLocation:D,hoveredPlaceId:E,setHoveredPlaceId:B,highlightedPlaceId:V,setHighlightedPlaceId:A})});case"mypage":return e.jsx(s.Suspense,{fallback:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500"})}),children:e.jsx(ue,{bookmarkedShops:te,visitedShops:se,userPosts:b,onShopSelect:c})});default:return e.jsx(s.Suspense,{fallback:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500"})}),children:e.jsx(K,{onShopSelect:c,searchTerm:o,setSearchTerm:r,sortKey:d,setSortKey:j,soupTypeFilter:N,setSoupTypeFilter:M,filterOpenNow:C,setFilterOpenNow:I,shops:O,setShops:P,isLocating:L,setIsLocating:T,isFiltering:F,setIsFiltering:R,userLocation:D,hoveredPlaceId:E,setHoveredPlaceId:B,highlightedPlaceId:V,setHighlightedPlaceId:A})})}};return e.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-950 text-gray-200",children:[e.jsx("header",{className:"bg-gray-900 border-b border-gray-800 text-white shadow-md sticky top-0 z-30",children:e.jsx("div",{className:"container mx-auto max-w-7xl px-4 py-3 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{m("search"),c(null)},children:[e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-red-500",children:[e.jsx("path",{d:"M4 21V19C4 17.8954 4.89543 17 6 17H10C11.1046 17 12 17.8954 12 19V21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 21V19C12 17.8954 12.8954 17 14 17H18C19.1046 17 20 17.8954 20 19V21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M7 17V11C7 8.23858 9.23858 6 12 6C14.7614 6 17 8.23858 17 11V17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 6V3M12 3L10 4M12 3L14 4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("h1",{className:"text-2xl font-bold tracking-wider",children:"Ramen Compass"})]})})}),e.jsx("main",{className:"flex-grow w-full max-w-7xl mx-auto",children:re()}),!a&&e.jsx("footer",{className:"sticky bottom-0 bg-gray-900/80 backdrop-blur-sm border-t border-gray-800 shadow-t-lg z-20",children:e.jsxs("div",{className:"container mx-auto max-w-7xl flex justify-around",children:[e.jsxs("button",{onClick:()=>{m("search"),c(null)},className:`flex flex-col items-center justify-center w-full py-2 text-sm font-medium transition-colors ${n==="search"?"text-red-500":"text-gray-400 hover:text-red-500"}`,children:[e.jsx(ae,{className:"h-6 w-6 mb-0.5"}),"æ¤œç´¢"]}),e.jsxs("button",{onClick:()=>{m("mypage"),c(null)},className:`flex flex-col items-center justify-center w-full py-2 text-sm font-medium transition-colors ${n==="mypage"?"text-red-500":"text-gray-400 hover:text-red-500"}`,children:[e.jsx(ie,{className:"h-6 w-6 mb-0.5"}),"ãƒžã‚¤ãƒšãƒ¼ã‚¸"]})]})}),e.jsx(ce,{onOpen:()=>z(!0)}),e.jsx(le,{isOpen:Q,onClose:()=>z(!1),onSubmit:ee}),e.jsx(me,{message:U.message,show:U.show})]})}const W=document.getElementById("root");if(!W)throw new Error("Could not find root element to mount to");const ge=ne.createRoot(W);ge.render(e.jsx(y.StrictMode,{children:e.jsx(he,{})}));
