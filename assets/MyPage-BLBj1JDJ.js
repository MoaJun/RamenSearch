import{f as k,j as e}from"./index-Dq7NBkUu.js";import{r as n,B as w,C as m,g as x,I as f,d as C,j as I,k as E}from"./ui-D1brmElj.js";import{R as M,a as g}from"./RamenShopListItem-DSriu-Ab.js";import"./vendor-D3F3s8fL.js";import"./ReviewSummary-B4aI4XXt.js";import"./ai-8rzRUgYl.js";const F=(t,r)=>{const a="group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm transition-colors";return t===r?`${a} border-red-500 text-red-600 dark:text-red-500`:`${a} border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:border-gray-300 dark:hover:border-gray-600`},H=(t,r)=>{const a="ml-2 rounded-full px-2 py-0.5 text-xs font-semibold";return t===r?`${a} bg-red-100 text-red-600 dark:bg-red-900/50 dark:text-red-400`:`${a} bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300`},B=({bookmarkedShops:t,visitedShops:r,userPosts:a,onShopSelect:d})=>{const[c,h]=n.useState("bookmarks"),[i,p]=n.useState([]),[y,o]=n.useState(!0);n.useEffect(()=>{j()},[]);const j=async()=>{try{o(!0);const s=await k.getFavoritesSorted("recent");p(s)}catch(s){console.error("Error loading favorites:",s)}finally{o(!1)}},u=[{id:"bookmarks",label:"気になる",icon:e.jsx(w,{className:"w-5 h-5"}),count:t.length},{id:"visited",label:"訪問済み",icon:e.jsx(m,{className:"w-5 h-5"}),count:r.length},{id:"favorites",label:"お気に入り",icon:e.jsx(x,{className:"w-5 h-5"}),count:i.length},{id:"posts",label:"自分の投稿",icon:e.jsx(f,{className:"w-5 h-5"}),count:a.length}],N=s=>e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white cursor-pointer hover:text-red-600",onClick:()=>d({placeId:s.placeId,name:s.name,address:s.address,rating:s.rating}),children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:s.address}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"w-4 h-4"}),s.rating.toFixed(1)]}),s.visitCount&&s.visitCount>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(m,{className:"w-4 h-4"}),s.visitCount,"回訪問"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(I,{className:"w-4 h-4"}),s.savedAt.toLocaleDateString("ja-JP")]})]}),s.personal_notes&&e.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded text-sm",children:[e.jsx(E,{className:"w-4 h-4 inline mr-1"}),s.personal_notes]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:s.tags.map((l,v)=>e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:l},v))})]}),e.jsx("div",{className:"ml-4 text-red-500",children:e.jsx(x,{className:"w-6 h-6 fill-current"})})]})},s.placeId),b=()=>{switch(c){case"bookmarks":return e.jsx("div",{className:"space-y-4",children:t.length>0?t.map((s,l)=>e.jsx(g,{shop:s,index:l+1,onSelect:()=>d(s),isHovered:!1,isHighlighted:!1,onMouseEnter:()=>{},onMouseLeave:()=>{}},s.placeId)):e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"まだ気になるお店がありません。"})});case"visited":return e.jsx("div",{className:"space-y-4",children:r.length>0?r.map((s,l)=>e.jsx(g,{shop:s,index:l+1,onSelect:()=>d(s),isHovered:!1,isHighlighted:!1,onMouseEnter:()=>{},onMouseLeave:()=>{}},s.placeId)):e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"まだ訪問したお店がありません。"})});case"favorites":return y?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"お気に入りを読み込み中..."})]}):e.jsx("div",{className:"space-y-4",children:i.length>0?i.map(N):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(x,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"まだお気に入りのお店がありません。"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"お店の詳細ページでハートをタップしてお気に入りに追加しましょう。"})]})});case"posts":return e.jsx("div",{className:"space-y-4",children:a.length>0?a.map(s=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[e.jsx(M,{photo:s.image,sizes:"(max-width: 768px) 100vw, 50vw",className:"w-full h-40 object-cover rounded-md mb-3"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-200",children:s.comment}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:s.createdAt})]},s.postId)):e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"まだ投稿がありません。"})})}};return e.jsxs("div",{className:"animate-fade-in p-4",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-4",children:e.jsx("nav",{className:"-mb-px flex space-x-4 overflow-x-auto","aria-label":"Tabs",children:u.map(s=>e.jsxs("button",{onClick:()=>h(s.id),className:F(s.id,c),children:[s.icon,e.jsx("span",{className:"ml-2 whitespace-nowrap",children:s.label}),e.jsx("span",{className:H(s.id,c),children:s.count})]},s.id))})}),b()]})};export{B as default};
