const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/StoreMap-D1wR31kS.js","assets/index-Dq7NBkUu.js","assets/vendor-D3F3s8fL.js","assets/ui-D1brmElj.js","assets/googleMaps-dUlr1ba2.js","assets/google-maps-93e-Jyro.js"])))=>i.map(i=>d[i]);
import{j as e,_}from"./index-Dq7NBkUu.js";import{X as I,a as $,b as C,R as M,c as R,r as v,A as S,d as w,e as k,B as P,f as U,g as H,N as L,E as A,h as z,i as D}from"./ui-D1brmElj.js";import{R as E}from"./ReviewSummary-B4aI4XXt.js";import"./vendor-D3F3s8fL.js";import"./ai-8rzRUgYl.js";const O=({isOpen:s,photos:n,currentIndex:c,onClose:x,onPrevious:h,onNext:f,shopName:m})=>{if(!s)return null;const a=l=>{l.target===l.currentTarget&&x()};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90",onClick:a,children:e.jsxs("div",{className:"relative max-w-7xl max-h-screen w-full h-full flex items-center justify-center p-4",children:[e.jsx("button",{onClick:x,className:"absolute top-4 right-4 z-10 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors","aria-label":"モーダルを閉じる",children:e.jsx(I,{className:"h-6 w-6"})}),n.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:h,className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-black/50 text-white p-3 rounded-full hover:bg-black/70 transition-colors","aria-label":"前の写真",children:e.jsx($,{className:"h-6 w-6"})}),e.jsx("button",{onClick:f,className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-black/50 text-white p-3 rounded-full hover:bg-black/70 transition-colors","aria-label":"次の写真",children:e.jsx(C,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"relative flex items-center justify-center w-full h-full",children:e.jsx("img",{src:n[c]?.large||n[c]?.medium||"",alt:`${m} - ${c+1}`,className:"max-w-full max-h-full object-contain rounded-lg"})}),e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium",children:m}),e.jsxs("div",{className:"text-xs text-gray-300 mt-1",children:[c+1," / ",n.length]})]})}),n.length>1&&e.jsx("div",{className:"absolute bottom-16 left-1/2 -translate-x-1/2 flex space-x-2 bg-black/50 p-2 rounded-lg max-w-sm overflow-x-auto",children:n.map((l,r)=>e.jsx("button",{onClick:()=>{},className:`flex-shrink-0 w-12 h-12 rounded-md overflow-hidden border-2 transition-colors ${r===c?"border-white":"border-transparent hover:border-white/50"}`,children:e.jsx("img",{src:l.small||l.medium||"",alt:`${m} thumbnail ${r+1}`,className:"w-full h-full object-cover"})},r))})]})})},T=({hours:s,isOpenNow:n})=>{const c=()=>{const a=new Date,l=a.getHours(),r=a.getMinutes(),u=l*60+r,d=s.match(/(\d{1,2}):(\d{2})\s*-\s*(\d{1,2}):(\d{2})/);if(d){const g=parseInt(d[1]),t=parseInt(d[2]),i=parseInt(d[3]),y=parseInt(d[4]),N=g*60+t,p=i*60+y;if(n&&u<p){const o=p-u,j=Math.floor(o/60),b=o%60;return o<60?`あと${o}分で閉店`:j===1&&b===0?"あと1時間で閉店":b===0?`あと${j}時間で閉店`:`あと${j}時間${b}分で閉店`}if(!n&&u<N){const o=N-u,j=Math.floor(o/60),b=o%60;return o<60?`あと${o}分で開店`:j===1&&b===0?"あと1時間で開店":b===0?`あと${j}時間で開店`:`あと${j}時間${b}分で開店`}}return null},x=()=>{const a=["日","月","火","水","木","金","土"],l=new Date().getDay(),r=a[l];if(s.includes("月曜日")||s.includes("火曜日")||s.includes("日曜日")){const d=s.split(`
`).find(g=>g.includes(`${r}曜日`));if(d)return{todayJp:r,todayLine:d}}return{todayJp:r,todayLine:null}},h=c(),{todayJp:f,todayLine:m}=x();return e.jsx("div",{children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(R,{className:"h-4 w-4 mr-2 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:`inline-flex items-center text-sm font-semibold px-2 py-1 rounded-full ${n?"bg-green-600 text-green-100":"bg-gray-600 text-gray-100"}`,children:n?"営業中":"営業時間外"}),h&&e.jsx("span",{className:"text-sm text-blue-400 font-medium",children:h}),e.jsxs("span",{className:"text-xs bg-blue-600 text-blue-100 px-2 py-1 rounded-full",children:[f,"曜日"]})]}),m?e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-blue-300 font-medium bg-blue-600/20 px-2 py-1 rounded text-sm",children:m}),s.split(`
`).length>1&&e.jsxs("details",{className:"text-gray-400 text-sm",children:[e.jsx("summary",{className:"cursor-pointer hover:text-gray-300",children:"他の曜日を表示"}),e.jsx("div",{className:"mt-2 pl-4 space-y-1",children:s.split(`
`).filter(a=>!a.includes(`${f}曜日`)).map((a,l)=>e.jsx("div",{className:"text-gray-400",children:a},l))})]})]}):e.jsx("div",{className:"text-gray-300 whitespace-pre-line",children:s})]})]})})},B=M.memo(T),J=M.lazy(()=>_(()=>import("./StoreMap-D1wR31kS.js"),__vite__mapDeps([0,1,2,3,4,5]))),Q=({shop:s,onBack:n,isBookmarked:c,isVisited:x,isFavorite:h,onBookmarkToggle:f,onStatusToggle:m})=>{const[a,l]=v.useState(0),[r,u]=v.useState(!1),[d,g]=v.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-gray-950 text-gray-200",children:[e.jsx("header",{className:"sticky top-0 z-30 bg-gray-900 border-b border-gray-800 px-4 py-3",children:e.jsxs("button",{onClick:n,className:"flex items-center text-gray-300 hover:text-white transition-colors",children:[e.jsx(S,{className:"h-5 w-5 mr-2"}),"戻る"]})}),e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.photos[a]?.large||s.photos[0]?.medium||"",alt:`${s.name} - ${a+1}`,className:"w-full h-64 object-cover cursor-pointer",onClick:()=>g(!0)}),s.photos.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>l(t=>t===0?s.photos.length-1:t-1),className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors","aria-label":"前の写真",children:e.jsx($,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>l(t=>t===s.photos.length-1?0:t+1),className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors","aria-label":"次の写真",children:e.jsx(C,{className:"h-5 w-5"})}),e.jsxs("div",{className:"absolute top-2 right-2 bg-black/50 text-white px-2 py-1 rounded text-sm",children:[a+1," / ",s.photos.length]}),e.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex space-x-2",children:s.photos.map((t,i)=>e.jsx("button",{onClick:()=>l(i),className:`w-2 h-2 rounded-full transition-colors ${i===a?"bg-white":"bg-white/50"}`,"aria-label":`写真 ${i+1} に移動`},i))})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:s.name}),e.jsxs("div",{className:"flex items-center mb-4 flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"h-5 w-5 text-yellow-500 mr-1",fill:"currentColor"}),e.jsx("span",{className:"text-yellow-500 font-bold",children:s.rating.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center text-gray-400",children:[e.jsx(k,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:[Math.round(s.distance),"m"]})]}),s.isOpenNow?e.jsx("span",{className:"inline-flex items-center text-sm font-semibold px-3 py-1 rounded-full bg-green-600 text-green-100",children:"営業中"}):e.jsx("span",{className:"inline-flex items-center text-sm font-semibold px-3 py-1 rounded-full bg-gray-600 text-gray-100",children:"営業時間外"})]}),e.jsx("p",{className:"text-gray-300 mb-4",children:s.address}),e.jsxs("div",{className:"flex space-x-2 mb-6",children:[e.jsxs("button",{onClick:f,className:`flex items-center px-4 py-2 rounded-lg transition-colors ${c?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),c?"ブックマーク済み":"ブックマーク"]}),e.jsxs("button",{onClick:()=>m("visited"),className:`flex items-center px-4 py-2 rounded-lg transition-colors ${x?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),x?"行った":"行く"]}),e.jsxs("button",{onClick:()=>m("favorite"),className:`flex items-center px-4 py-2 rounded-lg transition-colors ${h?"bg-red-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"お気に入り"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"地図・アクセス"}),e.jsx(v.Suspense,{fallback:e.jsx("div",{className:"w-full h-64 bg-gray-800 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"})}),children:e.jsx(J,{shop:s,apiKey:""})}),e.jsxs("div",{className:"mt-3 text-sm text-gray-400 space-y-1",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),s.address]}),s.accessInfo&&e.jsxs("p",{className:"flex items-center",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),s.accessInfo]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"店舗情報"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsx(B,{hours:s.hours,isOpenNow:s.isOpenNow}),(s.twitterUrl||s.instagramUrl)&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(A,{className:"h-4 w-4 mr-2 text-gray-400"}),s.twitterUrl?e.jsx("a",{href:s.twitterUrl,className:"text-blue-400 hover:text-blue-300",children:"X (Twitter)"}):e.jsx("a",{href:s.instagramUrl,className:"text-blue-400 hover:text-blue-300",children:"Instagram"})]}),s.parkingInfo&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsx("span",{children:s.parkingInfo})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"移動時間目安"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"現在地または検索地点から"}),e.jsxs("div",{className:"space-y-2 text-gray-300",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2",children:"🚶"}),e.jsx("span",{children:"徒歩"})]}),e.jsxs("span",{className:"font-semibold",children:["約",Math.ceil(s.distance/80),"分 (",Math.round(s.distance),"m)"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2",children:"🚗"}),e.jsx("span",{children:"車"})]}),e.jsxs("span",{className:"font-semibold",children:["約",Math.max(1,Math.ceil(s.distance/400)),"分"]})]})]})]})]})]}),s.photos&&s.photos.length>1&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"ラーメンの写真"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:s.photos.slice(1,7).map((t,i)=>e.jsx("div",{className:"aspect-square overflow-hidden rounded-lg bg-gray-800",children:e.jsx("img",{src:t.medium||t.large||"",alt:`${s.name}のラーメン ${i+1}`,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-200 cursor-pointer",onClick:()=>{l(i+1),g(!0)}})},i+1))}),s.photos.length>7&&e.jsxs("p",{className:"text-sm text-gray-400 mt-2 text-center",children:["他にも",s.photos.length-7,"枚の写真があります"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"レビュー"}),e.jsxs("span",{className:"text-sm text-gray-400",children:["Googleレビュー ",s.reviews.length,"件"]})]}),s.reviews&&s.reviews.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-medium mb-3 text-blue-400",children:"AI要約"}),e.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4",children:e.jsx(E,{placeId:s.placeId,reviews:s.reviews})})]}),e.jsxs("div",{className:"space-y-3",children:[(r?s.reviews:s.reviews.slice(0,2)).map((t,i)=>e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((y,N)=>e.jsx(w,{className:`w-4 h-4 ${N<t.rating?"text-yellow-400":"text-gray-500"}`,fill:"currentColor"},N))}),e.jsx("span",{className:"ml-2 text-sm font-medium",children:t.author})]}),t.relative_time_description&&e.jsx("span",{className:"text-xs text-gray-400",children:t.relative_time_description})]}),e.jsx("p",{className:"text-sm text-gray-300 whitespace-pre-line",children:t.text})]},i)),s.reviews.length>2&&e.jsxs("button",{onClick:()=>u(!r),className:"w-full text-center text-blue-400 hover:text-blue-300 font-semibold text-sm flex items-center justify-center",children:[r?"レビューを閉じる":`他のレビュー${s.reviews.length-2}件を表示`,e.jsx(D,{className:`w-4 h-4 ml-1 transition-transform ${r?"rotate-180":""}`})]})]})]})]})]})]})}),e.jsx(O,{isOpen:d,photos:s.photos,currentIndex:a,onClose:()=>g(!1),onPrevious:()=>l(t=>t===0?s.photos.length-1:t-1),onNext:()=>l(t=>t===s.photos.length-1?0:t+1),shopName:s.name})]})};export{Q as default};
